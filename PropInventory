import tkinter as tk
from tkinter import messagebox
import json

mainInventory = tk.Tk()
mainInventory.title("Prop Room Inventory")

winWidth = 600
winHeight = 400
scrWidth = mainInventory.winfo_screenwidth()
scrHeight = mainInventory.winfo_screenheight()
midX = int(scrWidth / 2 - winWidth / 2)
midY = int(scrHeight / 2 - winHeight / 2)

mainInventory.geometry(f"{winWidth}x{winHeight}+{midX}+{midY}")

props = {

 }
with open("prop_inventory.json", "w") as file:
    json.dump(props, file)


def propRegistry():
    def saveProp():
        pn = propName.get()
        pc = propCondition.get()
        pl = propLocation.get()

        x = {"Name": pn,
             "Condition": pc,
             "Location": pl}
        with open("prop_inventory.json", "r+") as outfile:
            file_data = json.load(outfile)
            file_data.update({pn:x})
            outfile.seek(0)
            json.dump(file_data, outfile, indent=4)
        messagebox.showinfo("Done!", "Prop saved!")
        propRegWin.destroy()
        return

    propRegWin = tk.Tk()
    winWidth = 600
    winHeight = 400
    scrWidth = propRegWin.winfo_screenwidth()
    scrHeight = propRegWin.winfo_screenheight()
    midX = int(scrWidth / 2 - winWidth / 2)
    midY = int(scrHeight / 2 - winHeight / 2)

    propRegWin.geometry(f"{winWidth}x{winHeight}+{midX}+{midY}")

    propName = tk.StringVar()
    propCondition = tk.StringVar()
    propLocation = tk.StringVar()

    tk.Label(propRegWin, text="Prop").pack()
    propName = tk.Entry(propRegWin, textvariable=propName)
    propName.pack()
    tk.Label(propRegWin, text="Condition").pack()
    propCondition = tk.Entry(propRegWin, textvariable=propCondition)
    propCondition.pack()
    tk.Label(propRegWin, text="Location").pack()
    propLocation = tk.Entry(propRegWin, textvariable=propLocation)
    propLocation.pack()

    tk.Button(propRegWin, text="Save", command=saveProp).pack()

    propRegWin.mainloop()

def propSearch():
    
    propSearchWin = tk.Tk()
    winWidth = 600
    winHeight = 400
    scrWidth = propSearchWin.winfo_screenwidth()
    scrHeight = propSearchWin.winfo_screenheight()
    midX = int(scrWidth / 2 - winWidth / 2)
    midY = int(scrHeight / 2 - winHeight / 2)

    propSearchWin.geometry(f"{winWidth}x{winHeight}+{midX}+{midY}")

    propSearchWin.mainloop()


tk.Button(mainInventory, text="Add Prop", command=propRegistry).pack()
tk.Button(mainInventory, text="Search Registry", command=propSearch).pack()

mainInventory.mainloop()
